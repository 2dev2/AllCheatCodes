
<body>
<a href="https://github.com/dennyzhang/cheatsheet.dennyzhang.com/tree/master/cheatsheet-mysql-A4"><img align="right" width="200" height="183" src="https://www.dennyzhang.com/wp-content/uploads/denny/watermark/github.png" /></a>
<div id="the whole thing" style="overflow: hidden;">
<div style="float: left; padding: 5px"> <a href="https://www.linkedin.com/in/dennyzhang001"><img src="https://www.dennyzhang.com/wp-content/uploads/sns/linkedin.png" alt="linkedin" /></a></div>
<div style="float: left; padding: 5px"><a href="https://github.com/dennyzhang"><img src="https://www.dennyzhang.com/wp-content/uploads/sns/github.png" alt="github" /></a></div>
<div style="float: left; padding: 5px"><a href="https://www.dennyzhang.com/slack" target="_blank" rel="nofollow"><img src="https://www.dennyzhang.com/wp-content/uploads/sns/slack.png" alt="slack"/></a></div>
</div>


<a href="http://makeapullrequest.com" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome"/></a>

<ul class="org-ul">
<li>PDF Link: <a href="https://github.com/dennyzhang/cheatsheet.dennyzhang.com/blob/master/cheatsheet-apt-A4/cheatsheet-apt-A4.pdf">cheatsheet-mysql-A4.pdf</a>, Category: <a href="https://cheatsheet.dennyzhang.com/category/linux/">linux</a></li>
<li>Blog URL: <a href="https://cheatsheet.dennyzhang.com/cheatsheet-mysql-A4">https://cheatsheet.dennyzhang.com/cheatsheet-mysql-A4</a></li>
<li>Related posts: <a href="https://cheatsheet.dennyzhang.com/cheatsheet-shell-A4">CheatSheet: shell</a>, <a href="https://github.com/topics/denny-cheatsheets">#denny-cheatsheets</a></li>
</ul>


File me <a href="https://github.com/dennyzhang/cheatsheet-apt-A4/issues">Issues</a> or star <a href="https://github.com/DennyZhang/cheatsheet-apt-A4">this repo</a>.
</div>
<div id="outline-container-orgc341136" class="outline-3">
<h3 id="orgc341136"><span class="section-number-3">1.1</span> Mysql Packages</h3>
<div class="outline-text-3" id="text-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Install mysql server</td>
<td class="org-left">apt-get install mysql-server</td>
</tr>

<tr>
<td class="org-left">Install mysql client</td>
<td class="org-left">apt-get install mysql-client libmysqlclient-dev, yum install mysql-devel</td>
</tr>

<tr>
<td class="org-left">Install python mysql library</td>
<td class="org-left">easy<sub>install</sub> mysql-python</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org3bc282b" class="outline-3">
<h3 id="org3bc282b"><span class="section-number-3">1.2</span> Mysql Basic</h3>
<div class="outline-text-3" id="text-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">mysql connect</td>
<td class="org-left">mysql -u$username -p$password -P$port -h$mysql<sub>host</sub> $db<sub>name</sub></td>
</tr>

<tr>
<td class="org-left">database encoding</td>
<td class="org-left">set names utf8;</td>
</tr>

<tr>
<td class="org-left">List databases</td>
<td class="org-left">show databases;</td>
</tr>

<tr>
<td class="org-left">List tables for current db</td>
<td class="org-left">show tables;</td>
</tr>

<tr>
<td class="org-left">Check table definition</td>
<td class="org-left">describe $table<sub>name</sub>;</td>
</tr>

<tr>
<td class="org-left">Run sql in non-interactive way</td>
<td class="org-left">mysql -uUSER -pPASSWORD databasename -e "select * from t limit 10"</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgfd7c87d" class="outline-3">
<h3 id="orgfd7c87d"><span class="section-number-3">1.3</span> DB Management</h3>
<div class="outline-text-3" id="text-1-3">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Import db</td>
<td class="org-left">mysql -uUSER -pPASSWORD database<sub>name</sub> &lt; backup.sql</td>
</tr>

<tr>
<td class="org-left">export db</td>
<td class="org-left">mysqldump -uUSER -pPASSWORD DATABASE &gt; backup.sql</td>
</tr>

<tr>
<td class="org-left">export db without schema</td>
<td class="org-left">mysqldump -uUSER -pPASSWORD DATABASE &#x2013;no-data=true &#x2013;add-drop-table=false &gt; backup.sql</td>
</tr>

<tr>
<td class="org-left">Grant access</td>
<td class="org-left">GRANT SUPER ON `DBNAME`.`user` TO 'DBUSER'@'%'</td>
</tr>

<tr>
<td class="org-left">Add column</td>
<td class="org-left">ALTER TABLE expenses ADD COLUMN createtime timestamp not null default now();</td>
</tr>

<tr>
<td class="org-left">Delete Column</td>
<td class="org-left">ALTER TABLE expenses DROP COLUMN createtime;</td>
</tr>

<tr>
<td class="org-left">Delete index</td>
<td class="org-left">DROP INDEX index<sub>name</sub> ON table<sub>name</sub>;</td>
</tr>

<tr>
<td class="org-left">Create index</td>
<td class="org-left">create index id<sub>index</sub> on table<sub>name</sub>(col<sub>name</sub>) using btree;</td>
</tr>

<tr>
<td class="org-left">Reset password</td>
<td class="org-left">UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root'; FLUSH PRIVILEGES;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org53e3057" class="outline-3">
<h3 id="org53e3057"><span class="section-number-3">1.4</span> SQL Statement</h3>
<div class="outline-text-3" id="text-1-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Select with regexp in where clause</td>
<td class="org-left">select * from expenses where date regexp '2013-0[4-5]' limit 2;</td>
</tr>

<tr>
<td class="org-left">Select with like in where clause</td>
<td class="org-left">select * from expenses where date like '2013-0%' limit 2;</td>
</tr>

<tr>
<td class="org-left">Select unix timestamp</td>
<td class="org-left">select unix<sub>timestamp</sub>(createtime) from expenses limit 1;</td>
</tr>

<tr>
<td class="org-left">Offset limit</td>
<td class="org-left">select * from student limit 4 offset 9</td>
</tr>

<tr>
<td class="org-left">Use replace function</td>
<td class="org-left">UPDATE tb1 SET f1=REPLACE(f1, 'abc', 'def');</td>
</tr>

<tr>
<td class="org-left">Use if function</td>
<td class="org-left">select Db, IF(IFNULL(User, "")="", DB, User) from db;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org4fbaca9" class="outline-3">
<h3 id="org4fbaca9"><span class="section-number-3">1.5</span> PSQL</h3>
<div class="outline-text-3" id="text-1-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Name</th>
<th scope="col" class="org-left">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Connect postgresql</td>
<td class="org-left">psql -U postgres</td>
</tr>

<tr>
<td class="org-left">Create user</td>
<td class="org-left">CREATE USER tom WITH PASSWORD '';</td>
</tr>

<tr>
<td class="org-left">Grant access</td>
<td class="org-left">GRANT ALL PRIVILEGES ON DATABASE launchpad<sub>empty</sub> to tom;</td>
</tr>

<tr>
<td class="org-left">Postgres configuration</td>
<td class="org-left">/var/lib/pgsql/data/pg<sub>hba.conf</sub></td>
</tr>

<tr>
<td class="org-left">Stop and start command</td>
<td class="org-left">service postgresql status</td>
</tr>

<tr>
<td class="org-left">Promote to super admin</td>
<td class="org-left">ALTER USER myuser WITH SUPERUSER;</td>
</tr>

<tr>
<td class="org-left">List datbases</td>
<td class="org-left">\l</td>
</tr>

<tr>
<td class="org-left">Change database</td>
<td class="org-left">\connect launchpad<sub>dev</sub>;</td>
</tr>

<tr>
<td class="org-left">Show tables</td>
<td class="org-left">\ds</td>
</tr>

<tr>
<td class="org-left">Copy databse</td>
<td class="org-left">createdb -O root -T launchpad<sub>dev</sub> launchpad<sub>ustack</sub><sub>cn</sub></td>
</tr>

<tr>
<td class="org-left">Drop database</td>
<td class="org-left">drop database launchpad<sub>ustack</sub><sub>cn</sub>;</td>
</tr>

<tr>
<td class="org-left">Connect db</td>
<td class="org-left">psql -h myhost -d mydb -U myuser -W</td>
</tr>

<tr>
<td class="org-left">Create user</td>
<td class="org-left">CREATE USER tom WITH PASSWORD 'myPassword';</td>
</tr>

<tr>
<td class="org-left">Create db</td>
<td class="org-left">CREATE DATABASE jerry;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org6ea4867" class="outline-3">
<h3 id="org6ea4867"><span class="section-number-3">1.6</span> More Resources</h3>
<div class="outline-text-3" id="text-1-6">

License: Code is licenmysql under <a href="https://www.dennyzhang.com/wp-content/mit_license.txt">MIT License</a>.

<a href="https://www.dennyzhang.com"><img align="right" width="201" height="268" src="https://raw.githubusercontent.com/USDevOps/mywechat-slack-group/master/images/denny_201706.png"></a>

<a href="https://www.dennyzhang.com"><img align="right" src="https://raw.githubusercontent.com/USDevOps/mywechat-slack-group/master/images/dns_small.png"></a>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Denny Zhang</p>
<p class="date">Created: 2019-01-04 Fri 10:44</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
<br/></body>

